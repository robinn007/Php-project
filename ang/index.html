<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <meta charset="UTF-8">
  <title>Student Management System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base href="/ci/ang/">
  <link rel="stylesheet" href="css/style.css">
  <!-- CSRF Token Meta -->
  <meta name="csrf-token-name" content="">
  <meta name="csrf-token" content="">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar" ng-controller="NavController">
    <div class="navbar-container">
      <a href="#/" class="navbar-brand">SMS</a>
      <ul class="navbar-nav">
        <li ng-show="isLoggedIn">
          <a href="#/students" class="nav-link" ng-class="{ active: currentPath == '/students' }">Dashboard</a>
        </li>
        <li ng-show="isLoggedIn">
          <a href="#/students/add" class="nav-link" ng-class="{ active: currentPath == '/students/add' }">Add Student 1</a>
        </li>
        <li ng-show="isLoggedIn">
          <a href="#/deleted-students" class="nav-link" ng-class="{ active: currentPath == '/deleted-students' }">Deleted Students</a>
        </li>
        <li ng-show="isLoggedIn">
          <a href="#/test-db" class="nav-link" ng-class="{ active: currentPath == '/test-db' }">Test DB</a>
        </li>
        <li ng-show="!isLoggedIn">
          <a href="#/login" class="nav-link" ng-class="{ active: currentPath == '/login' }">Login</a>
        </li>
        <li ng-show="!isLoggedIn">
          <a href="#/signup" class="nav-link" ng-class="{ active: currentPath == '/signup' }">Sign Up</a>
        </li>
      </ul>
      <div class="user-info" ng-show="isLoggedIn">
        <span class="user-name">Welcome, {{ currentUser }}</span>
        <a href="#/logout" class="btn-logout" ng-click="logout()">Logout</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <div ng-show="flashMessage" class="flash-message" ng-class="{ 'success': flashType == 'success', 'error': flashType == 'error', 'info': flashType == 'info' }" flash-message>
        <strong>{{ flashType | capitalize }}:</strong> {{ flashMessage }}
      </div>
      <div ng-view></div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Student Management System</h4>
          <p>Efficiently manage student records with our comprehensive platform.</p>
        </div>
        <div class="footer-section">
          <h4>Quick Links</h4>
          <ul class="footer-links">
            <li ng-show="isLoggedIn"><a href="#/students">Dashboard</a></li>
            <li ng-show="isLoggedIn"><a href="#/students/add">Add Student 2</a></li>
            <li ng-show="isLoggedIn"><a href="#/test-db">Database Status</a></li>
            <li ng-show="!isLoggedIn"><a href="#/login">Login</a></li>
            <li ng-show="!isLoggedIn"><a href="#/signup">Sign Up</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Support</h4>
          <ul class="footer-links">
            <li><a href="/ci/migrate">Run Migrations</a></li>
            <li><a href="/ci/students/setup_database">Setup Database</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-copyright">
          <p>&copy; 2025 Student Management System. Built with CodeIgniter 2 and AngularJS 1.3.</p>
        </div>
        <div class="footer-status">
          <span class="status-indicator" ng-class="{ 'online': isLoggedIn, 'offline': !isLoggedIn }"></span>
          <span ng-show="isLoggedIn">Connected as {{ currentUser }}</span>
          <span ng-show="!isLoggedIn">Not logged in</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- AngularJS Scripts -->
<script src="assets/angular-1.3.0/angular.js"></script>
<script src="assets/angular-1.3.0/angular-route.min.js"></script>
<script src="assets/angular-1.3.0/angular-cookies.js"></script>
<script src="js/app.js"></script>
<script src="js/services.js"></script>
<script src="js/controllers.js"></script>
<script src="js/directives.js"></script>
</body>
</html>